<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="Arnulf Heimsbakk" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="> /dev/null > 2>&1"/>
    <meta property="og:url" content="."/>
    <meta property="og:site_name" content="> /dev/null > 2>&1"/>
    <meta property="og:type" content="website"/>

    <link rel="canonical" href="." />

    <title>> /dev/null > 2>&1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" />

    <link rel="stylesheet" type="text/css" href="./theme/css/main.css" />
    <link href="http://blog.heimsbakk.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Atom Feed" />

    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher: "",
            doNotHash: false,
            doNotCopy: false,
            hashAddressBar: false
        });
    </script>
</head>

<body id="index">
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                    <a href="./">> /dev/null > 2>&1 </a>
                </h1>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li class="active"><a href="/index.html">home</a></li>
                            <li ><a href="#">|</a></li>
                            <li ><a href="./category/blog.html">blog</a></li>
                            <li ><a href="./category/uris.html">uris</a></li>
                        </ul>

                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span9">
                <section>
                    <ol id="posts-list" class="hfeed" start="9">
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-05-04-ocsp.html" rel="bookmark" title="Permalink to OCSP Stapling on Apache">
                                       OCSP Stapling on Apache
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/uris.html">uris</a>

    on 2014-05-04

        |
        tags:         <a href="./tag/apache.html">apache</a>
        <a href="./tag/security.html">security</a>
        <a href="./tag/ssl.html">ssl</a>


        |
        <a href="./posts/2014/2014-05-04-ocsp.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>Excerpt from Remy van Elsts tutorial: <em><a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> stapling is an enhancement to the standard <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> protocol that delivers <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> responses from the server with the certificate, eliminating the need for relying parties (web users) to check <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> responses with the issuing <a href="https://en.wikipedia.org/wiki/Certificate_Authority" title="Certificate authority">CA</a>. This has the effect of reducing bandwidth, improving perceived site performance, and increasing security for everyone involved in establishing the secure session. This tutorial shows you how to set it up with <a href="http://httpd.apache.org">Apache</a>.</em></p>
<ul>
<li>Read full tutorial on <a href="https://raymii.org/s/tutorials/OCSP_Stapling_on_Apache2.html">OCSP Stapling on Apache</a></li>
</ul>
<h2>Summary</h2>
<p>Create <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> stapling configuration for <a href="http://httpd.apache.org">Apache</a>.</p>
<div class="highlight"><pre>cat <span class="s">&lt;&lt;EOF &gt; /etc/apache2/conf-available/sslstapeling.conf</span>
<span class="s">SSLUseStapling on</span>
<span class="s">SSLStaplingCache &quot;shmcb:logs/stapling-cache(150000)&quot;</span>
<span class="s">SSLStaplingResponseMaxAge 900</span>
<span class="s">EOF</span>
</pre></div>


<p>Enable configuration, test it and do a restart of <a href="http://httpd.apache.org">Apache</a> if all is OK.</p>
<div class="highlight"><pre>a2enconf sslstapeling
apache2ctl configtest
apache2ctl restart
</pre></div>


<p>Check <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> with <a href="https://www.openssl.org">OpenSSL</a>.</p>
<div class="highlight"><pre>openssl s_client -connect «yoursite»:443 -tls1 -tlsextdebug -status
</pre></div>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-05-04-ocsp.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-05-03-ssl.html" rel="bookmark" title="Permalink to How to get A+ on SSL Labs">
                                       How to get A+ on SSL Labs
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-05-03

        |
        tags:         <a href="./tag/apache.html">apache</a>
        <a href="./tag/howto.html">howto</a>
        <a href="./tag/security.html">security</a>
        <a href="./tag/ssl.html">ssl</a>


        |
        <a href="./posts/2014/2014-05-03-ssl.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>This will show how to get A+ on <a href="https://www.ssllabs.com/ssltest">SSL Server Test</a> from <a href="https://www.ssllabs.com">Qualys SSL Labs</a>. </p>
<p>Enable <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">SSL</a> and <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html">headers</a> module in <a href="https://httpd.apache.org/docs">Apache2</a>.</p>
<div class="highlight"><pre><span class="go">a2enmod ssl </span>
<span class="go">a2enmod headers</span>
</pre></div>


<p>Edit Apache configuration.</p>
<div class="highlight"><pre><span class="nb">SSLCertificateFile</span> <span class="sx">/etc/ssl/crt/</span>«yourcert».pem
<span class="nb">SSLCertificateKeyFile</span> <span class="sx">/etc/ssl/crt/</span>«yourkey».pem
<span class="nb">SSLCertificateChainFile</span> <span class="sx">/etc/ssl/crt/</span>«intermediatechain».pem

<span class="nb">Header</span> always set Strict-Transport-Security <span class="s2">&quot;max-age=31536000; includeSubDomains&quot;</span>
<span class="nb">SSLEngine</span> <span class="k">on</span>
<span class="nb">SSLProtocol</span> <span class="k">all</span> -SSLv2 -SSLv3
<span class="nb">SSLHonorCipherOrder</span> <span class="k">On</span>
<span class="nb">SSLCipherSuite</span> EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS
</pre></div>


<p>The <strong>!</strong> preceding the cipher means that Apache will not use that cipher.</p>
<h2>View ciphers</h2>
<p>List the ciphers openssl supports with the current configuration.</p>
<div class="highlight"><pre>openssl ciphers -v -ssl3 -tls1 <span class="s1">&#39;EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS&#39;</span>
</pre></div>


<h2>Explanation</h2>
<p>With this configuration Apache will prefer <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a>. If <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a> can't be negotiated it will default to <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a> cipher. This configuration will work on all newer browser. Exceptions are older <a href="https://en.wikipedia.org/wiki/Internet_explorer">IE</a>, older Java and a few bots. </p>
<p>Where there are no links to the information source it's taken from the <a href="https://www.openssl.org/docs/apps/ciphers.html">documentation</a> on <a href="https://www.openssl.org">openssl.org</a>.</p>
<h4>Header always set Strict-Transport-Security</h4>
<p>Force browser to use <a href="https://en.wikipedia.org/wiki/Https">HTTPS</a> even if the user enters <a href="https://en.wikipedia.org/wiki/Http">HTTP</a>. The browser should remember this setting for a really long time, example a year.</p>
<h4>SSLHonorCipherOrder On</h4>
<p>Use the servers preferred encryption not the browsers which may be a weaker cipher.</p>
<h4>EECDH</h4>
<p>Ephemeral elliptic-curve Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/ECDH">ECDH</a>.</p>
<h4>EDH</h4>
<p>Ephemeral Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/Diffie-Helmann">Diffie–Hellman key exchange</a>.</p>
<h4>AES</h4>
<p><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption Standard</a>.</p>
<h4>!aNULL</h4>
<p>The cipher suites offering no authentication. This ...</p>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-05-03-ssl.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-05-03-rst.html" rel="bookmark" title="Permalink to reStructuredText cheat sheet">
                                       reStructuredText cheat sheet
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-05-03

        |
        tags:         <a href="./tag/cheatsheet.html">cheatsheet</a>
        <a href="./tag/pelican.html">pelican</a>


        |
        <a href="./posts/2014/2014-05-03-rst.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p class="first last">My cheat sheet for <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html">reStructuredText</a> syntax with examples how it will look after parsing. <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html">reStructuredText</a> is an alternative for <a class="reference external" href="http://daringfireball.net/projects/markdown">Markedown</a>.</p>

                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-05-03-rst.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-05-03-dropbox.html" rel="bookmark" title="Permalink to Auto generate Pelican blog from Dropbox">
                                       Auto generate Pelican blog from Dropbox
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-05-03

        |
        tags:         <a href="./tag/dropbox.html">dropbox</a>
        <a href="./tag/howto.html">howto</a>
        <a href="./tag/incron.html">incron</a>
        <a href="./tag/pelican.html">pelican</a>


        |
        <a href="./posts/2014/2014-05-03-dropbox.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>This is my notes for how to update my <a href="http://blog.getpelican.com">Pelican</a> blog automaticlly when I write new posts. See <a href="2014-04-12-pelican">Creating a blog based on Pelican</a> for getting started with <a href="http://blog.getpelican.com">Pelican</a> blog engine.</p>
<p>A way to be able to blog from anywhere is to use <a href="https://www.dropbox.com">Dropbox</a> as repository for the your blog. Then let <a href="http://blog.getpelican.com">Pelican</a> auto regenerate the blog on changes in the <a href="https://www.dropbox.com">Dropbox</a> folder.</p>
<p>A prerequest for this recipe is that <code>/var/www</code> is not directly exposed to the web.</p>
<h2>Preparing Dropbox</h2>
<p>First create a new <a href="https://www.dropbox.com">Dropbox</a> account and create a <code>Pelican</code> folder. Share this folder with your main <a href="https://www.dropbox.com">Dropbox</a> account. Now copy the sources for your <a href="http://blog.getpelican.com">Pelican</a> blog into the the shared folder.</p>
<p>On your web server, install <a href="https://www.dropbox.com">Dropbox</a> under the <code>www-data</code> user. </p>
<div class="highlight"><pre><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> wget -O - <span class="s2">&quot;https://www.dropbox.com/download?plat=lnx.x86_64&quot;</span> | tar xzf -
</pre></div>


<p>Then link up the new <a href="https://www.dropbox.com">Dropbox</a> account to the web server by accessing the link you get from starting the <a href="https://www.dropbox.com">Dropbox</a> daemon.</p>
<div class="highlight"><pre>~/.dropbox-dist/dropboxd
</pre></div>


<p>Edit crontab for <code>www-data</code>, <code>crontab -e</code>, to start <a href="https://www.dropbox.com">Dropbox</a> daemon if it's not running. useful when the server reboots.</p>
<div class="highlight"><pre><span class="err">*/</span><span class="mi">5</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="n">pgrep</span> <span class="o">-</span><span class="n">F</span> <span class="o">~/</span><span class="p">.</span><span class="n">dropbox</span><span class="o">/</span><span class="n">dropbox</span><span class="p">.</span><span class="n">pid</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">||</span> <span class="p">(</span><span class="o">~/</span><span class="p">.</span><span class="n">dropbox</span><span class="o">-</span><span class="n">dist</span><span class="o">/</span><span class="n">dropboxd</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>


<p>Now <a href="https://www.dropbox.com">Dropbox</a> should be in sync and have your latest source for the blog.</p>
<h2>Autogenerate blog on change</h2>
<p>We need to install <a href="http://blog.getpelican.com">Pelican</a> blog engine and <a href="http://inotify.aiken.cz/?section=incron&amp;page=about&amp;lang=en">incron</a> to trigger auto generation of the blog on changes in the <code>~/Dropbox/Pelican/content</code> folder.</p>
<div class="highlight"><pre>sudo apt-get install python-pelican python-markdown incron
</pre></div>


<p>Edit <code>DROPBOX_DIR</code> the the <a href="http://blog.getpelican.com">Pelican</a> <code>Makefile</code> to point to the <a href="https://en.wikipedia.org/wiki/Virtual_hosting" title="Virtual hosting">VirtualHost ...</a></p>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-05-03-dropbox.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-05-01-easyrsa.html" rel="bookmark" title="Permalink to Configuring OpenVPN server on RTN66U">
                                       Configuring OpenVPN server on RTN66U
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-05-01

        |
        tags:         <a href="./tag/howto.html">howto</a>
        <a href="./tag/tomato.html">tomato</a>
        <a href="./tag/network.html">network</a>
        <a href="./tag/openvpn.html">openvpn</a>
        <a href="./tag/security.html">security</a>
        <a href="./tag/vpn.html">vpn</a>


        |
        <a href="./posts/2014/2014-05-01-easyrsa.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>The router firmware Tomato, see previous post <a href="2014-04-17-tomato">RT-N66u with Tomato by Shibby firmware</a>, can act as an <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> server.</p>
<p>Using open <a href="https://en.wikipedia.org/wiki/Wifi" title="Wi-Fi">Wi-Fi</a> access points can be very useful and necessary, but it is inherently insecure. Using the router as an <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> server can increase your privacy and security when you are on the go. By creating an encrypted <a href="https://en.wikipedia.org/wiki/Vpn" title="Virtual Private Network">VPN</a> connection back home to the router, you don't only get protection from nosy eavesdroppers but you get access to all your equipment behind the router at home as well.</p>
<p>For <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> to work we need to create our own <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> for signing both server, the router, and optionally client certificates. This notes will only show how to create a server certificate and configure the router with user name and password authentication.</p>
<h2>Preparations, create CA</h2>
<p>Install necessary software. Although haveged, is not required, see <a href="2014-04-29-haveged">Better entropy with haveged</a>.</p>
<div class="highlight"><pre>sudo apt-get install easy-rsa haveged
</pre></div>


<p>Create a work directory for <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">OpenVPN</a>. Take care to protect this directory and the files under it. </p>
<div class="highlight"><pre><span class="n">make</span><span class="o">-</span><span class="n">cadir</span> <span class="err">«</span><span class="n">yourdomain</span><span class="err">»</span>
</pre></div>


<p>Enter your <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> directory.</p>
<div class="highlight"><pre><span class="nb">cd</span> «yourdomain»
</pre></div>


<p>Edit the <code>vars</code> file and change the following variables to something more sensible for you.</p>
<div class="highlight"><pre><span class="nb">export </span><span class="nv">KEY_COUNTRY</span><span class="o">=</span><span class="s2">&quot;US&quot;</span>
<span class="nb">export </span><span class="nv">KEY_PROVINCE</span><span class="o">=</span><span class="s2">&quot;CA&quot;</span>
<span class="nb">export </span><span class="nv">KEY_CITY</span><span class="o">=</span><span class="s2">&quot;SanFrancisco&quot;</span>
<span class="nb">export </span><span class="nv">KEY_ORG</span><span class="o">=</span><span class="s2">&quot;Funston-Fort&quot;</span>
<span class="nb">export </span><span class="nv">KEY_EMAIL</span><span class="o">=</span><span class="s2">&quot;me@myhost.mydomain&quot;</span>
</pre></div>


<p>Source the variables into current bash session.</p>
<div class="highlight"><pre><span class="nb">source</span> ./vars
</pre></div>


<p>Do a initial clean.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">clean</span><span class="o">-</span><span class="n">all</span> 
</pre></div>


<p>Create your <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> public and private key.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">ca</span>
</pre></div>


<p>Generate your <a href="https://en.wikipedia.org/wiki/Diffie-Helmann" title="Diffie–Hellman key exchange">Diffie–Hellman</a> parameters.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">dh</span>
</pre></div>


<p>Create your routers public and private key.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">key ...</span></pre></div>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-05-01-easyrsa.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-04-29-haveged.html" rel="bookmark" title="Permalink to Better entropy with haveged">
                                       Better entropy with haveged
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/uris.html">uris</a>

    on 2014-04-29

        |
        tags:         <a href="./tag/entropy.html">entropy</a>
        <a href="./tag/howto.html">howto</a>
        <a href="./tag/security.html">security</a>
        <a href="./tag/trng.html">trng</a>


        |
        <a href="./posts/2014/2014-04-29-haveged.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>Entropy is important for generating good encryption keys. Do you have a busy server relying on crypto, generating keys, you need lot of good entropy. Or if you have a disk less system you don't get as much entropy from the kernel that you may wish. One way to get a lot of good entropy is to use haveged. Haveged is closer to a <a href="https://en.wikipedia.org/wiki/TRNG" title="True Random Number Generator">TRNG</a> than a <a href="https://en.wikipedia.org/wiki/PRNG" title="PseudoRandom Number Generator">PRNG</a>.</p>
<p>Excerpt from havegeds homepage: <em>The haveged project is an attempt to provide an easy-to-use, unpredictable random number generator based upon an adaptation of the HAVEGE algorithm. Haveged was created to remedy low-entropy conditions in the Linux random device that can occur under some workloads, especially on headless servers. Current development of haveged is directed towards improving overall reliablity and adaptability while minimizing the barriers to using haveged for other tasks.</em></p>
<ul>
<li><a href="http://www.issihosts.com/haveged">haveged - A simple entropy daemon</a></li>
</ul>
<h2>How to install</h2>
<p>Install haveged from the repository - and that's it. </p>
<div class="highlight"><pre>sudo apt-get install haveged
</pre></div>


<p>Enjoy fast good entropy. Check your entropy</p>
<div class="highlight"><pre>cat /proc/sys/kernel/random/entropy_avail
</pre></div>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-04-29-haveged.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-04-17-tomato.html" rel="bookmark" title="Permalink to RT-N66u with Tomato by Shibby firmware">
                                       RT-N66u with Tomato by Shibby firmware
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-04-17

        |
        tags:         <a href="./tag/firmware.html">firmware</a>
        <a href="./tag/howto.html">howto</a>
        <a href="./tag/network.html">network</a>
        <a href="./tag/tomato.html">tomato</a>


        |
        <a href="./posts/2014/2014-04-17-tomato.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p><em>This is a part of my personal notes. Use this information at your own risk. If you are uncertain or don't know what you are doing. Do not proceed.</em></p>
<p>Asus <a href="http://www.asus.com/Networking/RTN66U">RT-N66U</a> is a Linux based wireless router. The stock firmware can be a bit limiting for the more advanced user. If you want better <a href="http://en.wikipedia.org/wiki/Quality_of_service" title="Quality of service">QoS</a>, <a href="http://openvpn.net">OpenVPN</a> or just more control over the network I recommend installing <a href="http://tomato.groov.pl">Tomato by Shibby</a> firmware.</p>
<p>Download the latest version of the firmware from <a href="http://tomato.groov.pl">Tomato by Shibby</a>. Look for <code>Asus RT-N66u 64k</code> in the version folder in <a href="http://tomato.groov.pl/download/K26RT-N">K26RT-N</a> repository.</p>
<p>I use the all in one, AIO, i.e. <code>tomato-K26USB-1.28.RT-N5x-MIPSR2-117-AIO-64K.trx</code>.</p>
<h2>Flash RT-N66u</h2>
<ol>
<li>Download latest <a href="http://tomato.groov.pl">Tomato by Shibby</a>, e.g. <a href="http://tomato.groov.pl/download/K26RT-N/build5x-117-EN/Asus%20RT-N66u%2064k/tomato-K26USB-1.28.RT-N5x-MIPSR2-117-AIO-64K.trx">tomato-K26USB-1.28.RT-N5x-MIPSR2-117-AIO-64K.trx</a>.</li>
<li>Connect the router to a computer with cable.</li>
<li>Turn off router.e</li>
<li>Turn on route while holding in reset button. Wait until the power LED starts blinking. The router is in flash mode.</li>
<li>Configure the network opn the computer to <code>192.168.1.2/255.255.255.0</code>.</li>
<li>Browse to <a href="http://192.168.1.1">http://192.168.1.1</a>, erase <a href="http://en.wikipedia.org/wiki/Non-volatile_random-access_memory" title="Non-volatile random-access memory">NVRAM</a> and upload the new firmware.</li>
<li>This takes some time. </li>
<li>Configure network on computer to DHCP and wait until it receives a address. </li>
<li>Browse to <a href="http://192.168.1.1">http://192.168.1.1</a> and start configuring the router.</li>
</ol>
<h3>Tips</h3>
<p>Problems booting. Try to reset <a href="http://en.wikipedia.org/wiki/Non-volatile_random-access_memory" title="Non-volatile random-access memory">NVRAM</a> again. Resetting <a href="http://en.wikipedia.org/wiki/Non-volatile_random-access_memory" title="Non-volatile random-access memory">NVRAM</a> can also be done by holding in WPS button while powering on. Don't release WPS button before 30 seconds. </p>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-04-17-tomato.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-04-13-ssllabs.html" rel="bookmark" title="Permalink to SSL Server Test">
                                       SSL Server Test
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/uris.html">uris</a>

    on 2014-04-13

        |
        tags:         <a href="./tag/security.html">security</a>
        <a href="./tag/ssl.html">ssl</a>


        |
        <a href="./posts/2014/2014-04-13-ssllabs.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>Run <a href="https://www.ssllabs.com">Qualys SSL Labs</a> test to test the strength and combability of SSL certificate.</p>
<ul>
<li><a href="https://www.ssllabs.com/ssltest">SSL Server Test</a></li>
</ul>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-04-13-ssllabs.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-04-13-duplicates.html" rel="bookmark" title="Permalink to Find duplicate files">
                                       Find duplicate files
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2014-04-13

        |
        tags:         <a href="./tag/bash.html">bash</a>
        <a href="./tag/oneliner.html">oneliner</a>


        |
        <a href="./posts/2014/2014-04-13-duplicates.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>Find all duplicate files in current and sub-directories with bash. </p>
<div class="highlight"><pre>find -not -empty -type f -printf <span class="s1">&#39;%s\n&#39;</span> | sort -rn | uniq -d | xargs -I<span class="o">{}</span> -n1 find -type f -size <span class="o">{}</span>c -print0 | xargs -0 md5sum | sort | uniq -w32 --all-repeated<span class="o">=</span>separate
</pre></div>


<h2>Breakdown</h2>
<ol>
<li>Find all non empty files and print out size.</li>
<li>Do a numeric sort on size list.</li>
<li>Print out only duplicate sizes.</li>
<li>One at a time run find on size and print file names.</li>
<li>Find md5sum of all files.</li>
<li>Alphabetical sort md5sums and file names.</li>
<li>Find all md5sums which repeats and print them in groups. </li>
</ol>
<h2>Alternatively</h2>
<p>Or do it the easy way and install a tool for finding duplicates files. This tool is much faster than the oneliner above. </p>
<div class="highlight"><pre>apt-get install fdupes
</pre></div>


<p>This does more or less the same thing as the oneliner.</p>
<div class="highlight"><pre>fdupes -r .
</pre></div>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-04-13-duplicates.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2014/2014-04-13-digitalocean.html" rel="bookmark" title="Permalink to Cloud virtual machine">
                                       Cloud virtual machine
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulf-heimsbakk.html">Arnulf Heimsbakk</a>
    </address>

    in <a href="./category/uris.html">uris</a>

    on 2014-04-13

        |
        tags:         <a href="./tag/cloud.html">cloud</a>
        <a href="./tag/vm.html">vm</a>


        |
        <a href="./posts/2014/2014-04-13-digitalocean.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->                                <p>Easiest way I know to create cloud virtual machine is to create a Droplet on Digital Ocean.</p>
<ul>
<li><a href="https://www.digitalocean.com/?refcode=2c2348527899">DigialOcean</a>. </li>
</ul>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2014/2014-04-13-digitalocean.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="./index.html">&laquo;</a>
    Page 2 / 3
        <a href="./index3.html">&raquo;</a>
</p>
                </section><!-- /#content -->
</div>
<div class="span3">
    <section id="sidebar">
            <div>
                <h2>Browse content by</h2>
                <ul class="fa-ul">
                <li><a href="./categories.html"><i class="fa-li fa fa-tags"></i> Categories</a></li>
                <li><a href="./archives.html"><i class="fa-li fa fa-calendar"></i> Dates</a></li>
                <li><a href="./tags.html"><i class="fa-li fa fa-tag"></i> Tags</a></li>

                <li><a href="http://blog.heimsbakk.net/feeds/all.atom.xml"><i class="fa-li fa fa-rss"></i> Feed</a></li>
                </ul>
            </div><!-- /.browse -->
            <div>
                <h2>Links</h2>
                <ul>
                    <li><a href="https://isc.sans.edu">isc</a></li>
                    <li><a href="https://www.schneier.com">schneier</a></li>
                    <li><a href="http://krebsonsecurity.com">krebs</a></li>
                    <li><a href="https://www.grc.com/securitynow.htm">security now!</a></li>
                    <li><a href="https://www.eff.org">eff</a></li>
                    <li><a href="https://www.usenix.org/publications/login">;login:</a></li>
                    <li><a href="https://news.ycombinator.com">hacker news</a></li>
                    <li><a href="https://mailinator.com">mailinator</a></li>
                    <li><a href="https://duckduckgo.com">duckduckgo</a></li>
                </ul>
            </div><!-- /.Links -->
            <div>
                <h2>Social</h2>
                <ul>
                    <li><a href="https://twitter.com/aheimsbakk">twitter</a></li>
                    <li><a href="https://plus.google.com/+ArnulfHeimsbakk/posts/p/pub">google+</a></li>
                    <li><a href="http://linkedin.com/in/arnulfheimsbakk">linkedin</a></li>
                    <li><a href="http://instagram.com/1uff3#">instagram</a></li>
                </ul>
            </div><!-- /.social -->
            <div>
                <h2>Tags</h2>
                <ul id="cloud">
                     <li class="tag-3"><a href="./tag/firmware.html">firmware</a></li>
                     <li class="tag-4"><a href="./tag/benchmark.html">benchmark</a></li>
                     <li class="tag-4"><a href="./tag/android.html">android</a></li>
                     <li class="tag-2"><a href="./tag/network.html">network</a></li>
                     <li class="tag-4"><a href="./tag/cyanogenmod.html">cyanogenmod</a></li>
                     <li class="tag-4"><a href="./tag/cheatsheet.html">cheatsheet</a></li>
                     <li class="tag-4"><a href="./tag/chrome.html">chrome</a></li>
                     <li class="tag-1"><a href="./tag/howto.html">howto</a></li>
                     <li class="tag-2"><a href="./tag/pelican.html">pelican</a></li>
                     <li class="tag-3"><a href="./tag/apache.html">apache</a></li>
                     <li class="tag-4"><a href="./tag/ubuntu.html">ubuntu</a></li>
                     <li class="tag-4"><a href="./tag/io.html">io</a></li>
                     <li class="tag-4"><a href="./tag/dropbox.html">dropbox</a></li>
                     <li class="tag-4"><a href="./tag/zram.html">zram</a></li>
                     <li class="tag-2"><a href="./tag/ssl.html">ssl</a></li>
                     <li class="tag-4"><a href="./tag/openvpn.html">openvpn</a></li>
                     <li class="tag-4"><a href="./tag/pulseaudio.html">pulseaudio</a></li>
                     <li class="tag-4"><a href="./tag/maps.html">maps</a></li>
                     <li class="tag-4"><a href="./tag/vpn.html">vpn</a></li>
                     <li class="tag-4"><a href="./tag/incron.html">incron</a></li>
                     <li class="tag-3"><a href="./tag/vagrant.html">vagrant</a></li>
                     <li class="tag-4"><a href="./tag/intel.html">intel</a></li>
                     <li class="tag-4"><a href="./tag/entropy.html">entropy</a></li>
                     <li class="tag-4"><a href="./tag/chromium.html">chromium</a></li>
                     <li class="tag-4"><a href="./tag/tuning.html">tuning</a></li>
                     <li class="tag-3"><a href="./tag/oneliner.html">oneliner</a></li>
                     <li class="tag-4"><a href="./tag/cloud.html">cloud</a></li>
                     <li class="tag-4"><a href="./tag/sound.html">sound</a></li>
                     <li class="tag-2"><a href="./tag/bash.html">bash</a></li>
                     <li class="tag-4"><a href="./tag/trng.html">trng</a></li>
                     <li class="tag-4"><a href="./tag/firefox.html">firefox</a></li>
                     <li class="tag-4"><a href="./tag/vm.html">vm</a></li>
                     <li class="tag-4"><a href="./tag/pstate.html">pstate</a></li>
                     <li class="tag-4"><a href="./tag/i915.html">i915</a></li>
                     <li class="tag-4"><a href="./tag/grub.html">grub</a></li>
                     <li class="tag-4"><a href="./tag/vim.html">vim</a></li>
                     <li class="tag-3"><a href="./tag/tomato.html">tomato</a></li>
                     <li class="tag-4"><a href="./tag/openstack.html">openstack</a></li>
                     <li class="tag-2"><a href="./tag/security.html">security</a></li>
                     <li class="tag-3"><a href="./tag/kernel.html">kernel</a></li>
                     <li class="tag-4"><a href="./tag/virtualbox.html">virtualbox</a></li>
                </ul>
             </div>
<!-- /.Tags -->
    </section><!-- /#sidebar -->
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        This blog is proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                    </p>
                    <p>
                        <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a> is a responsive theme designed by <a href="http://jsliang.com/">jsliang</a> and <a href="https://github.com/jsliang/pelican-fresh/graphs/contributors">contributors</a>.
                        Special thanks to <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> and <a href="http://getbootstrap.com/">Twitter Bootstrap</a>.
                    </p>
                </address>
            </div>
        </div>
    </footer>

<script type="text/javascript">
    var disqus_shortname = 'blogheimsbakknet';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
</body>
</html>
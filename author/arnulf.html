<!DOCTYPE html>
<html lang="en">
<head>
        <title>> /dev/null > 2>&1 - Articles by arnulf</title>
        <meta charset="utf-8" />
        <link href="http://blog.heimsbakk.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Full Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://blog.heimsbakk.net/">> /dev/null > 2>&1 <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/index.html">home</a></li>
            <li><a href="#">|</a></li>
              <li><a href="http://blog.heimsbakk.net/category/blog.html">blog</a></li>
              <li><a href="http://blog.heimsbakk.net/category/uris.html">uris</a></li>
        </ul></nav><!-- /#menu -->
<section id="content">
<h2>Articles by arnulf</h2>

<ol id="post-list">
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2015/zram.html" rel="bookmark" title="Permalink to zram: Compressed RAM based block devices">zram: Compressed RAM based block devices</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2015-01-11T00:00:00"> sø. 11 januar 2015 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>From <a class="reference external" href="https://www.kernel.org/doc/Documentation/blockdev/zram.txt">zram</a> documentation: <em>The zram module creates RAM based block devices named /dev/zram&lt;id&gt; (&lt;id&gt; = 0, 1, ...). Pages written to these disks are compressed and stored in memory itself. These disks allow very fast I/O and compression provides good amounts of memory savings. Some of the usecases include /tmp storage, use as swap disks, various caches under /var and maybe many more :)</em></p>
<ul class="simple">
<li><a class="reference external" href="https://www.kernel.org/doc/Documentation/blockdev/zram.txt">zram</a></li>
</ul>
<div class="section" id="example-of-compressed-swap-in-memory">
<h2>Example of compressed swap in memory</h2>
<p>Write this commands in <code>/etc/rc.local</code> to create a 2G compressed swap partition in memory.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Load the module and create one zram device, /dev/zram0</span>
modprobe zram <span class="nv">num_devices</span><span class="o">=</span>1

<span class="c"># Maximum of compressed streams (keep same as CPUs)</span>
<span class="nb">echo </span>4 &gt; /sys/devices/virtual/block/zram0/max_comp_streams

<span class="c"># Size of zram0 device in k/m/g</span>
<span class="nb">echo </span>2g &gt; /sys/devices/virtual/block/zram0/disksize

<span class="c"># Comression compression algorithm to use</span>
<span class="nb">echo </span>lzo &gt; /sys/devices/virtual/block/zram0/comp_algorithm

<span class="c"># Create the swap file system</span>
mkswap /dev/zram0

<span class="c"># Enable the swap partition with high priority</span>
swapon /dev/zram0 -p 10
</pre></div>
</td></tr></table><!-- # vim: set spell spl=en: -->
</div>
 </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2015/2015-01-10-pa.html" rel="bookmark" title="Permalink to Record a PulseAudio sound stream">Record a PulseAudio sound stream</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2015-01-10T00:00:00"> lø. 10 januar 2015 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Ever wondered on how to record the audio from one application? Either the browser or a streaming application that don't have the option to save audio to a file.</p>
<p>The <a href="https://en.wikipedia.org/wiki/PulseAudio">PulseAudio</a> sound server in your desktop makes this quite easy.</p>
<p>I've created a small script that captures the current playing sound stream and redirects it to <a href="https://en.wikipedia.org/wiki/Flac" title="Free Lossless Audio Codec">FLAC</a> audio file. After the capture is started, you can start playing sound from other programs. It won't interfere with the current capture.</p>
<h2>Capture audio</h2>
<h3>Pre requests</h3>
<p>You have to install a couple of programs, if you don't have them from before, to make the bash script work.</p>
<div class="highlight"><pre>apt-get install pulseaudio-utils flac coreutils
</pre></div>


<h3>The script</h3>
<p>This is my <code>record-app.sh</code> script.</p>
<div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="nv">BN</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span>
<span class="nv">SI</span><span class="o">=</span><span class="k">$(</span>pacmd list-sink-inputs | grep -m 1 index | egrep -o <span class="s2">&quot;[[:digit:]]+&quot;</span><span class="k">)</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$1&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;usage: $BN filename&quot;</span>
  <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$SI&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;error: no input sinks found&quot;</span>
  <span class="nb">exit </span>2
<span class="k">fi</span>

<span class="nv">N</span><span class="o">=</span><span class="s2">&quot;$1&quot;</span>

<span class="nb">echo</span> <span class="nv">$BN</span> recording:
<span class="nb">echo</span> · Found sink index «<span class="nv">$SI</span>»
<span class="nb">echo</span> · Loading module-null-sink
<span class="nv">MI</span><span class="o">=</span><span class="k">$(</span>pactl load-module module-null-sink <span class="nv">sink_name</span><span class="o">=</span>rec<span class="k">)</span>
<span class="nb">trap</span> <span class="s2">&quot;{ echo · Trying to delete null sink «rec»; pactl unload-module $MI; }&quot;</span> EXIT
<span class="nb">echo</span> · Moving sink «<span class="nv">$SI</span>» to null sink «rec»
pactl move-sink-input <span class="nv">$SI</span> rec
<span class="nb">echo</span> · Saving sound data to «<span class="nv">$N</span>.flac» 
parec -d rec.monitor | flac --endian<span class="o">=</span>little --sign<span class="o">=</span>signed --channels<span class="o">=</span>2 --bps<span class="o">=</span>16n --sample-rate<span class="o">=</span>44100 -o <span class="s2">&quot;$1.flac&quot;</span> - 2&gt;/dev/null
</pre></div>


<h3>Usage</h3>
<div class="highlight"><pre>usage: record-app.sh filename
</pre></div>


<h4>Example 1</h4>
<div class="highlight"><pre>./record-app.sh firefox-sound
</pre></div>


<p>Will start to record the current playing audio in Firefox. The ...</p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-12-15-vagrant-openstack.html" rel="bookmark" title="Permalink to Vagrant with OpenStack">Vagrant with OpenStack</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-18T00:00:00"> to. 18 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>If you want to use <a href="https://www.vagrantup.com">Vagrant</a> with <a href="http://www.openstack.org">OpenStack</a>, you need to prepare <a href="https://www.vagrantup.com">Vagrant</a> with installing the <a href="https://github.com/cloudbau/vagrant-openstack-plugin">vagrant-openstack-plugin</a>. I had some problems installing it directly through <code>vagrant plugin install</code>. I had to clone it from <a href="https://github.com">Github</a> and install it manually. </p>
<h2>One time configuration</h2>
<h3>Install OpenStack plugin in Vagrant</h3>
<div class="highlight"><pre><span class="nb">cd</span> /tmp
git clone https://github.com/cloudbau/vagrant-openstack-plugin
<span class="nb">cd </span>vagrant-openstack-plugin
gem build vagrant-openstack-plugin.gemspec
vagrant plugin install vagrant-openstack-plugin-*.gem
</pre></div>


<p>Add a dummy box to <a href="https://www.vagrantup.com">Vagrant</a> thats needed by the plugin.</p>
<div class="highlight"><pre>vagrant box add dummy https://github.com/cloudbau/vagrant-openstack-plugin/raw/master/dummy.box
</pre></div>


<h3>Download OpenStack RC file</h3>
<ul>
<li>Log into OpenStack</li>
<li>Download OpenStack API RC file</li>
<li>Go to <code>Project</code> -&gt; <code>Compute</code> -&gt; <code>Access &amp; Security</code> -&gt; <code>API Access</code> </li>
<li>Down RC file by hitting <code>Download OpenStack RC File</code></li>
<li>Put <code>$USER-openrc.sh</code> in your <code>~/</code> or somewhere you prefer</li>
</ul>
<h2>Configure a Vagrant VM</h2>
<h3>Vagrantfile</h3>
<p>This is a default generic Vagrant file which starts a <code>m1.tiny</code> flavor image of Ubuntu Utopic. It requires that you already have added your ssh key to OpenStack. Please add your ssh key with the name <code>$USER_ssh_key</code>. </p>
<div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;vagrant-openstack-plugin&#39;</span>

<span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;dummy&quot;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;rsync&quot;</span><span class="p">,</span> <span class="n">rsync__exclude</span><span class="p">:</span> <span class="s2">&quot;.git/&quot;</span>

  <span class="c1"># Make sure the private key from the key pair is provided</span>
  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">private_key_path</span> <span class="o">=</span> <span class="s2">&quot;~/.ssh/id_rsa&quot;</span>

  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:openstack</span> <span class="k">do</span> <span class="o">|</span><span class="n">os</span><span class="o">|</span>
    <span class="n">os</span><span class="o">.</span><span class="n">username</span>     <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_USERNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">api_key</span>      <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_PASSWORD&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">flavor</span>       <span class="o">=</span> <span class="sr">/m1.tiny/</span>
    <span class="n">os</span><span class="o">.</span><span class="n">image</span>        <span class="o">=</span> <span class="s2">&quot;Ubuntu CI utopic 2014-09-18&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">endpoint</span>     <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_AUTH_URL&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/tokens&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">keypair_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_USERNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">_ssh_key&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">ssh_username</span> <span class="o">=</span> <span class="s2">&quot;ubuntu&quot;</span>

    <span class="c1"># The tenant have two networks, so ...</span></pre></div> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-12-15-fio.html" rel="bookmark" title="Permalink to fio - flexible I/O tester">fio - flexible I/O tester</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-15T00:00:00"> ma. 15 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>From man page: <code>fio</code> <em>is a tool that will spawn a number of threads or processes doing a particular type of I/O action as specified by the user. The typical use of fio is to write a job file matching the I/O load one wants to simulate.</em></p>
<p>This example only show how to use <code>fio</code> to make reproduceable test on a file system. For me it's been useful to catch changes in I/O throughput before and after a system has gone into production. Buy running the same tests on all systems the numbers are comparable. </p>
<p>All parameter numbers are examples, define your own test according to what you want to measure. </p>
<h2>Installing fio</h2>
<div class="highlight"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">fio</span>
</pre></div>


<h2>Running fio</h2>
<ul>
<li>Change <code>bsrange</code> to the block size range you want to test. </li>
<li><code>numjobs</code> is the number of simultanious read/write threads.</li>
<li><code>size</code> is the working file size.</li>
<li>If you want to test a read heavy load, use <code>rwmixread</code> with a percentage of reads versus writes..</li>
</ul>
<div class="highlight"><pre><span class="k">for </span>i in <span class="nb">read </span>write readwrite randread randwrite randrw; <span class="k">do </span>fio --name<span class="o">=</span>fio  --write_bw_log<span class="o">=</span><span class="nv">$i</span> --write_iops_log<span class="o">=</span><span class="nv">$i</span> --write_lat_log<span class="o">=</span><span class="nv">$i</span> --ioengine<span class="o">=</span>sync --size<span class="o">=</span>10G --runtime<span class="o">=</span>60 --rw<span class="o">=</span><span class="nv">$i</span> --norandommap --refill_buffers --randrepeat<span class="o">=</span>0  --iodepth<span class="o">=</span>1 --direct<span class="o">=</span>1 --numjobs<span class="o">=</span>8 --group_reporting --bsrange<span class="o">=</span>4k-4k; <span class="k">done</span>
</pre></div>


<h2>Generating I/O plots</h2>
<div class="highlight"><pre>fio2gnuplot -i -g
</pre></div>


<p>For me is the most interesting plot is <strong>compare-result-2Dsmooth.png</strong>.</p>
<h2>Generating bandwidth plots</h2>
<p>Testing bandwidth is better to do with a larger block size. I usually set a block size between 64k to 1m. </p>
<div class="highlight"><pre><span class="k">for ...</span></pre></div> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-04-13-powersave.html" rel="bookmark" title="Permalink to Power saving on laptop">Power saving on laptop</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-14T20:00:00"> sø. 14 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Notes for power saving on my i5 laptop.</p>
<h2>/etc/rc.local</h2>
<div class="highlight"><pre><span class="c">#  SATA power save</span>
<span class="nb">echo </span>medium_power | tee /sys/class/scsi_host/host*/link_power_management_policy &gt; /dev/null

<span class="c"># Set minimum performance to 30% of CPU MHz </span>
<span class="nb">echo </span>30 &gt; /sys/devices/system/cpu/intel_pstate/min_perf_pct

<span class="c"># Set CPU governor to power save since we run on a laptop</span>
<span class="c"># Valid values: powersave performance</span>
<span class="nb">echo </span>powersave | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor &gt; /dev/null

<span class="c"># Increase for CrashPlan so unlocking gnome-shell lock screen works</span>
<span class="nb">echo </span>1048576 &gt; /proc/sys/fs/inotify/max_user_watches
</pre></div>


<h2>/etc/default/grub</h2>
<div class="highlight"><pre><span class="c"># Make my back light buttons work correctly</span>
<span class="c"># Full power save for GPU</span>
<span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&quot;video.use_native_backlight=1 i915.enable_rc6=7 i915.enable_fbc=1 i915.lvds_downclock=1&quot;</span>
</pre></div>


<h6>vim: set spell spl=en syn=markdown:</h6> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-06-19-webgl.html" rel="bookmark" title="Permalink to View Google Earth in the browser">View Google Earth in the browser</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-06-19T00:00:00"> to. 19 juni 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Google now supports Google Earth in Google Maps. As far as I know it works in <a href="https://en.wikipedia.org/wiki/Google_Chrome">Chrome</a> and <a href="https://en.wikipedia.org/wiki/Chromium_%28web_browser%29">Chromium</a>. If Google Earth isn't available where the satellite view options is, your graphic card is in the browsers blacklist.</p>
<p>To force enabling <a href="https://en.wikipedia.org/wiki/WebGL">WebGL</a> in the browser start it with the following options</p>
<div class="highlight"><pre>chromium-browser --enable-webgl --ignore-gpu-blacklist
</pre></div>


<p>Now you can use Google Earth in <a href="https://maps.google.com">maps.google.com</a>.</p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-25-vagrant.html" rel="bookmark" title="Permalink to Vagrant, development environments made easy">Vagrant, development environments made easy</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-25T00:00:00"> sø. 25 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Prototyping and testing configurations and system installations is time consuming on traditional hardware. That is why I started using Vagrant for nearly all development, prototyping and testing. It's free and really easy to use. If you install <a href="https://www.virtualbox.org/">VirtualBox</a> <code>sudo apt-get install virtualbox</code> first, you'll be up and running in no time.</p>
<p>Vagrant do profile itself for developers, but <a href="https://en.wikipedia.org/wiki/Sysadmin" title="System administrator">sysadmin</a>s has much to gain by using such tools to make life easier for themselves. Automation and reproducibility is key concepts in modern system administration. We need to think more and more like developers, as much as developers need to think more and more like <a href="https://en.wikipedia.org/wiki/Sysadmin" title="System administrator">sysadmin</a>s.</p>
<p>Excerpt: <em>Create and configure lightweight, reproducible, and portable development environments.</em></p>
<ul>
<li><a href="http://www.vagrantup.com/">Vagrant</a></li>
</ul> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-12-revocation.html" rel="bookmark" title="Permalink to Only Firefox is safe post Heartblead">Only Firefox is safe post Heartblead</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-12T00:00:00"> ma. 12 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p><a href="https://en.wikipedia.org/wiki/Steve_Gibson_%28computer_programmer%29">Steve Gibson</a> have a nice round-up where he explains how certificate revocation does work and why Chrome and Chromiums certificate revocation scheme doesn't work. I recommend to read both <a href="https://en.wikipedia.org/wiki/Steve_Gibson_%28computer_programmer%29">Steve Gibson</a>'s article on <a href="https://www.grc.com/revocation/crlsets.htm">An Evaluation of the Effectiveness of Chrome's CRLSets</a> and Adam Langley's in my opinion a bit missplaced answer <a href="https://www.imperialviolet.org/2014/04/29/revocationagain.html">Revocation still doesn't work</a>.</p>
<ul>
<li>
<p><a href="https://www.grc.com/revocation.htm">Security Certificate - Revocation Awareness Test</a></p>
</li>
<li>
<p>Listen to <a href="https://www.grc.com/securitynow.htm">Security Now!</a> episode 454 <a href="https://www.grc.com/securitynow.htm#454">Certificate Revocation Part 2</a> in which Steve explains about both certificate revocation and Google's CRLSets.</p>
</li>
</ul>
<h2>How to be safe</h2>
<ol>
<li>
<p>Use Firefox until Chrome is fixed.</p>
</li>
<li>
<p>In Firefox enable hard fail on <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> errors. </p>
<p>Goto <strong>Preferences</strong> → <strong>Advanced</strong> → <strong>Certificates</strong> → <strong>Validation</strong>.</p>
<p>Check <strong>When an OSCP server connection failes, treat the certificate as invalid.</strong></p>
</li>
</ol> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-11-rootnexus.html" rel="bookmark" title="Permalink to Flashing a custom rom on Nexus 4">Flashing a custom rom on Nexus 4</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-11T00:00:00"> sø. 11 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Flashing a custom image on an <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> mobile could be just fun. But if you don't know why you want to do it, or do it just because it's a challenge. <strong>Then don't!</strong> </p>
<h2>The bad and the good</h2>
<p>I'm only pointing out some of the cons and the pros here.</p>
<h3>Negative sides</h3>
<ul>
<li>An OS image could contain <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a>; only use community trusted images.</li>
<li>If you don't pay attention you can get <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a> running as root. That's B A D !</li>
<li>May not have all the phones vendor functionality. </li>
<li>The image may be buggy.</li>
</ul>
<h4>Consequences of a buggy image</h4>
<ul>
<li>Lock up your phone when you least expect it.</li>
<li>Drain the battery quicker. </li>
<li>Suddenly reboot.</li>
</ul>
<h3>Positive sides</h3>
<ul>
<li>You can get a newer more secure operating system.</li>
<li>Use less battery.</li>
<li>No <a href="https://en.wikipedia.org/wiki/Crapware" title="Pre-installed software">crapware</a>.</li>
<li>Extra security functions.</li>
</ul>
<h2>Flashing CyanogenMod</h2>
<p>One of the custom <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> images based on <a href="https://source.android.com" title="Android Open Source Project">AOSP</a> is <a href="http://www.cyanogenmod.org">CyanogenMod</a>. As I know, it's one of the more used ones. Quite stable if you keep away from the <a href="https://en.wikipedia.org/wiki/Nightlies" title="Neutral build">nightlies</a> and rich on functionality but not bloated.</p>
<h3>Preparations</h3>
<ol>
<li>
<p>Install <a href="https://developer.android.com/tools/help/adb.html" title="Android Debug Bridge">adb</a> and <a href="https://en.wikipedia.org/wiki/Android_software_development#Fastboot" title="Fastboot">fastboot</a> to help manage your Nexus phone.</p>
<div class="highlight"><pre>sudo apt-get install android-tools-adb android-tools-fastboot
</pre></div>


</li>
<li>
<p>Download custom a recovery image. Personally I prefer <a href="http://www.clockworkmod.com">ClockworkMod</a> and the touch recovery. Note, this image is compiled for the Nexus 4 phone. Other phones use other images.</p>
<div class="highlight"><pre>wget http://download2.clockworkmod.com/recoveries/recovery-clockwork-touch-6.0.4.7-mako.img
</pre></div>


</li>
<li>
<p>Download the latest M snapshot from <a href="http://www.cyanogenmod.org">CyanogenMod</a> on <a href="http://download.cyanogenmod.org">download.cyanogenmod.org</a>. The model name for Nexus 4 is ...</p></li></ol> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-04-ocsp.html" rel="bookmark" title="Permalink to OCSP Stapling on Apache">OCSP Stapling on Apache</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-04T00:00:00"> sø. 04 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Excerpt from Remy van Elsts tutorial: <em><a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> stapling is an enhancement to the standard <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> protocol that delivers <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> responses from the server with the certificate, eliminating the need for relying parties (web users) to check <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> responses with the issuing <a href="https://en.wikipedia.org/wiki/Certificate_Authority" title="Certificate authority">CA</a>. This has the effect of reducing bandwidth, improving perceived site performance, and increasing security for everyone involved in establishing the secure session. This tutorial shows you how to set it up with <a href="http://httpd.apache.org">Apache</a>.</em></p>
<ul>
<li>Read full tutorial on <a href="https://raymii.org/s/tutorials/OCSP_Stapling_on_Apache2.html">OCSP Stapling on Apache</a></li>
</ul>
<h2>Summary</h2>
<p>Create <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> stapling configuration for <a href="http://httpd.apache.org">Apache</a>.</p>
<div class="highlight"><pre>cat <span class="s">&lt;&lt;EOF &gt; /etc/apache2/conf-available/sslstapeling.conf</span>
<span class="s">SSLUseStapling on</span>
<span class="s">SSLStaplingCache &quot;shmcb:logs/stapling-cache(150000)&quot;</span>
<span class="s">SSLStaplingResponseMaxAge 900</span>
<span class="s">EOF</span>
</pre></div>


<p>Enable configuration, test it and do a restart of <a href="http://httpd.apache.org">Apache</a> if all is OK.</p>
<div class="highlight"><pre>a2enconf sslstapeling
apache2ctl configtest
apache2ctl restart
</pre></div>


<p>Check <a href="https://en.wikipedia.org/wiki/OCSP" title="Online Certificate Status Protocol">OCSP</a> with <a href="https://www.openssl.org">OpenSSL</a>.</p>
<div class="highlight"><pre>openssl s_client -connect «yoursite»:443 -tls1 -tlsextdebug -status
</pre></div> </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="http://blog.heimsbakk.net/author/arnulf2.html">&raquo;</a>
</p>
</section><!-- /#content -->
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>
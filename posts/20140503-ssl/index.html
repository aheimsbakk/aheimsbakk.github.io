<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="author" content="Arnulf Heimsbakk">
		<meta name="description" content="Sysadmin that blogs when life get boring">
		<meta name="generator" content="Hugo 0.69.0" />
		<title>How to get A&#43; on SSL Labs &middot; &gt; /dev/null 2&gt;&amp;1</title>
		<link rel="shortcut icon" href="https://blog.heimsbakk.net/images/favicon.ico">
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/style.css">
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/highlight.css">

		
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/font-awesome.min.css">
		

		
		<link href="https://blog.heimsbakk.net/index.xml" rel="alternate" type="application/rss+xml" title="&gt; /dev/null 2&gt;&amp;1" />
		

		
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/code-size.css">
		
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/width.css">
		
		<link rel="stylesheet" href="https://blog.heimsbakk.net/css/syntax.css">
		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://blog.heimsbakk.net/'> <span class="arrow">←</span>Home</a>
	
	<a href='https://blog.heimsbakk.net/posts'>Archive</a>
	<a href='https://blog.heimsbakk.net/tags'>Tags</a>
	<a href='https://blog.heimsbakk.net/about'>About</a>

	

	
	<a class="cta" href="https://blog.heimsbakk.net/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        How to get A&#43; on SSL Labs
                    </h1>
                    <h2 class="headline">
                    May 3, 2014 00:00
                    · 328 words
                    · 2 minute read
                      <span class="tags">
                      
                      
                          
                              <a href="https://blog.heimsbakk.net/tags/security">security</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                <section id="post-body">
                    <p>This will show how to get A+ on <a href="https://www.ssllabs.com/ssltest">SSL Server Test</a> from <a href="https://www.ssllabs.com">Qualys SSL Labs</a>.</p>
<p>Enable <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">SSL</a> and <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html">headers</a> module in <a href="https://httpd.apache.org/docs">Apache2</a>.</p>
<pre><code>a2enmod ssl
a2enmod headers
</code></pre>
<p>Edit Apache configuration.</p>
<pre><code>SSLCertificateFile /etc/ssl/crt/«yourcert».pem
SSLCertificateKeyFile /etc/ssl/crt/«yourkey».pem
SSLCertificateChainFile /etc/ssl/crt/«intermediatechain».pem

Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;
SSLEngine on
SSLProtocol all -SSLv2 -SSLv3
SSLHonorCipherOrder On
SSLCipherSuite EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS
</code></pre>
<p>The <strong>!</strong> preceding the cipher means that Apache will not use that cipher.</p>
<h2 id="view-ciphers">View ciphers</h2>
<p>List the ciphers openssl supports with the current configuration.</p>
<pre><code>openssl ciphers -v -ssl3 -tls1 'EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS'
</code></pre>
<h2 id="explanation">Explanation</h2>
<p>With this configuration Apache will prefer <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a>. If <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a> can&rsquo;t be negotiated it will default to <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a> cipher. This configuration will work on all newer browser. Exceptions are older <a href="https://en.wikipedia.org/wiki/Internet_explorer">IE</a>, older Java and a few bots.</p>
<p>Where there are no links to the information source it&rsquo;s taken from the <a href="https://www.openssl.org/docs/apps/ciphers.html">documentation</a> on <a href="https://www.openssl.org">openssl.org</a>.</p>
<h4 id="header-always-set-strict-transport-security">Header always set Strict-Transport-Security</h4>
<p>Force browser to use <a href="https://en.wikipedia.org/wiki/Https">HTTPS</a> even if the user enters <a href="https://en.wikipedia.org/wiki/Http">HTTP</a>. The browser should remember this setting for a really long time, example a year.</p>
<h4 id="sslhonorcipherorder-on">SSLHonorCipherOrder On</h4>
<p>Use the servers preferred encryption not the browsers which may be a weaker cipher.</p>
<h4 id="eecdh">EECDH</h4>
<p>Ephemeral elliptic-curve Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/ECDH">ECDH</a>.</p>
<h4 id="edh">EDH</h4>
<p>Ephemeral Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/Diffie-Helmann">Diffie–Hellman key exchange</a>.</p>
<h4 id="aes">AES</h4>
<p><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption Standard</a>.</p>
<h4 id="anull">!aNULL</h4>
<p>The cipher suites offering no authentication. This is currently the anonymous DH algorithms. These cipher suites are vulnerable to a ``man in the middle&rsquo;&rsquo; attack and so their use is normally discouraged.</p>
<h4 id="enull">!eNULL</h4>
<p>The «NULL» ciphers that is those offering no encryption.</p>
<h4 id="low">!LOW</h4>
<p>«Low» encryption cipher suites, currently those using 64 or 56 bit encryption algorithms but excluding export cipher suites.</p>
<h4 id="rc4">!RC4</h4>
<p><a href="https://en.wikipedia.org/wiki/Rc4">RC4</a> stream cipher. After attacks on RC4 it is said to be vulnerable. See <a href="https://www.schneier.com/blog/archives/2013/03/new_rc4_attack.html">New RC4 Attack</a> for more information.</p>
<h4 id="3des">!3DES</h4>
<p><a href="https://en.wikipedia.org/wiki/3des">Triple DES</a>.</p>
<h4 id="des">!DES</h4>
<p><a href="https://en.wikipedia.org/wiki/Data_Encryption_Standard">Data Encryption Standard</a>.</p>
<h4 id="md5">!MD5</h4>
<p><a href="https://en.wikipedia.org/wiki/Md5">MD5</a> message-digest algorithm.</p>
<h4 id="exp">!EXP</h4>
<p>Export encryption algorithms. Including 40 and 56 bits algorithms.</p>
<h4 id="psk">!PSK</h4>
<p>Cipher suites using pre-shared keys (PSK).</p>
<h4 id="srp">!SRP</h4>
<p><a href="http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol">Secure Remote Password protocol</a>.</p>
<h4 id="dss">!DSS</h4>
<p>Cipher suites using DSS authentication, i.e. the certificates carry DSS keys.</p>

                </section>
            </article>

            

            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://github.com/aheimsbakk">
        <i class="fa fa-github-square"></i>
    </a>
    
    <a class="symbol" href="https://www.linkedin.com/in/arnulfheimsbakk">
        <i class="fa fa-linkedin-square"></i>
    </a>
    
    <a class="symbol" href="https://twitter.com/aheimsbakk">
        <i class="fa fa-twitter-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       © Copyright 2020 <i class="fa fa-heart" aria-hidden="true"></i> Arnulf Heimsbakk
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="https://blog.heimsbakk.net/js/jquery-3.3.1.min.js"></script>
<script src="https://blog.heimsbakk.net/js/main.js"></script>
<script src="https://blog.heimsbakk.net/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>







    </body>
</html>

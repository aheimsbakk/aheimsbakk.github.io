<!DOCTYPE html>
<html lang="en">
<head>
          <title>> /dev/null > 2>&1</title>
        <meta charset="utf-8" />
        <link href="http://blog.heimsbakk.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Full Atom Feed" />
        <link href="http://blog.heimsbakk.net/feeds/blog.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Categories Atom Feed" />



    <meta name="tags" contents="android" />
    <meta name="tags" contents="cyanogenmod" />
    <meta name="tags" contents="firmware" />
    <meta name="tags" contents="howto" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">> /dev/null > 2>&1 <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/index.html">home</a></li>
            <li><a href="#">|</a></li>
              <li class="active"><a href="../../category/blog.html">blog</a></li>
              <li><a href="../../category/uris.html">uris</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../posts/2014/2014-05-11-rootnexus.html" rel="bookmark"
         title="Permalink to Flashing a custom rom on Nexus 4">Flashing a custom rom on Nexus 4</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2014-05-11T00:00:00">
      sø. 11 mai 2014
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="../../author/arnulf.html">arnulf</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Flashing a custom image on an <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> mobile could be just fun. But if you don't know why you want to do it, or do it just because it's a challenge. <strong>Then don't!</strong> </p>
<h2>The bad and the good</h2>
<p>I'm only pointing out some of the cons and the pros here.</p>
<h3>Negative sides</h3>
<ul>
<li>An OS image could contain <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a>; only use community trusted images.</li>
<li>If you don't pay attention you can get <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a> running as root. That's B A D !</li>
<li>May not have all the phones vendor functionality. </li>
<li>The image may be buggy.</li>
</ul>
<h4>Consequences of a buggy image</h4>
<ul>
<li>Lock up your phone when you least expect it.</li>
<li>Drain the battery quicker. </li>
<li>Suddenly reboot.</li>
</ul>
<h3>Positive sides</h3>
<ul>
<li>You can get a newer more secure operating system.</li>
<li>Use less battery.</li>
<li>No <a href="https://en.wikipedia.org/wiki/Crapware" title="Pre-installed software">crapware</a>.</li>
<li>Extra security functions.</li>
</ul>
<h2>Flashing CyanogenMod</h2>
<p>One of the custom <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> images based on <a href="https://source.android.com" title="Android Open Source Project">AOSP</a> is <a href="http://www.cyanogenmod.org">CyanogenMod</a>. As I know, it's one of the more used ones. Quite stable if you keep away from the <a href="https://en.wikipedia.org/wiki/Nightlies" title="Neutral build">nightlies</a> and rich on functionality but not bloated.</p>
<h3>Preparations</h3>
<ol>
<li>
<p>Install <a href="https://developer.android.com/tools/help/adb.html" title="Android Debug Bridge">adb</a> and <a href="https://en.wikipedia.org/wiki/Android_software_development#Fastboot" title="Fastboot">fastboot</a> to help manage your Nexus phone.</p>
<div class="highlight"><pre>sudo apt-get install android-tools-adb android-tools-fastboot
</pre></div>


</li>
<li>
<p>Download custom a recovery image. Personally I prefer <a href="http://www.clockworkmod.com">ClockworkMod</a> and the touch recovery. Note, this image is compiled for the Nexus 4 phone. Other phones use other images.</p>
<div class="highlight"><pre>wget http://download2.clockworkmod.com/recoveries/recovery-clockwork-touch-6.0.4.7-mako.img
</pre></div>


</li>
<li>
<p>Download the latest M snapshot from <a href="http://www.cyanogenmod.org">CyanogenMod</a> on <a href="http://download.cyanogenmod.org">download.cyanogenmod.org</a>. The model name for Nexus 4 is <em>mako</em>.</p>
<div class="highlight"><pre>wget http://download.cyanogenmod.org/get/jenkins/67695/cm-11-20140504-SNAPSHOT-M6-mako.zip
</pre></div>


</li>
<li>
<p>Download <a href="https://en.wikipedia.org/wiki/Google_apps">Google Apps</a> from a trusted source. Again I prefer <a href="http://www.cyanogenmod.org">CyanogenMod</a> as source and download from <a href="http://wiki.cyanogenmod.org/w/Google_Apps#Downloads">wiki.cyanogenmod.org</a>.</p>
<div class="highlight"><pre>wget http://itvends.com/gapps/gapps-kk-20140105-signed.zip
</pre></div>


</li>
<li>
<p>And to be on the safe side. Download the origian Nexus 4 firmware from Googles page <a href="https://developers.google.com/android/nexus/images">Factory Images for Nexus Devices</a>. Just in case... And if it is the case, untar the file and read the included instructions.</p>
<div class="highlight"><pre>wget https://dl.google.com/dl/android/aosp/occam-kot49h-factory-02e344de.tgz
</pre></div>


</li>
</ol>
<h3>Doing the deed</h3>
<p>This is notes for my personal use. If you decide to go through with this I don't take any responsibility for any <a href="https://en.wikipedia.org/wiki/Bricked" title="Bricked">bricked</a> or damaged devices. </p>
<h4>1. Enable USB debugging on Android</h4>
<ul>
<li>
<p><strong>Settings</strong> → <strong>About phone</strong>. </p>
<p>Press repeatedly on <strong>Build number</strong> until you become a developer.</p>
</li>
<li>
<p><strong>Settings</strong> → <strong>Developer options</strong>. </p>
<p>Check <strong>USB debugging</strong>.</p>
</li>
</ul>
<h4>2. Unlock bootloader</h4>
<ul>
<li>
<p>Connect phone to computer with USB cable.</p>
</li>
<li>
<p>Check that the cable is usable by listing devices with adb. If you don't get any response. Change the cable and try again. The last cable could be a cheep charger cable without data wires.</p>
<div class="highlight"><pre><span class="n">adb</span> <span class="n">devices</span>
</pre></div>


</li>
<li>
<p>Reboot phone into <a href="https://en.wikipedia.org/wiki/Bootloader" title="Booting">bootloader</a>.</p>
<div class="highlight"><pre><span class="n">adb</span> <span class="n">reboot</span> <span class="n">bootloader</span>
</pre></div>


</li>
<li>
<p>Check that you get connection with <a href="https://en.wikipedia.org/wiki/Android_software_development#Fastboot" title="Fastboot">fastboot</a>.</p>
<div class="highlight"><pre><span class="n">fastboot</span> <span class="n">devices</span>
</pre></div>


</li>
<li>
<p>Unlock your <a href="https://en.wikipedia.org/wiki/Bootloader" title="Booting">bootloader</a>. This takes some time while the phone is erasing all data.</p>
<div class="highlight"><pre><span class="n">fastboot</span> <span class="n">oem</span> <span class="n">unlock</span>
</pre></div>


</li>
<li>
<p>Choose <strong>Yes</strong> on phone by pressing <strong>Volume up</strong>, and then accept by pressing <strong>Power</strong>.</p>
</li>
</ul>
<h4>3. Flash and enter recovery</h4>
<ul>
<li>
<p>Flash recovery image.</p>
<div class="highlight"><pre><span class="n">fastboot</span> <span class="n">flash</span> <span class="n">recovery</span> <span class="n">recovery</span><span class="o">-</span><span class="n">clockwork</span><span class="o">-</span><span class="n">touch</span><span class="o">-</span><span class="mf">6.0.4.7</span><span class="o">-</span><span class="n">mako</span><span class="p">.</span><span class="n">img</span>
</pre></div>


</li>
<li>
<p>Enter recovery image by pressing <strong>Volume up</strong> until <strong>Recovery mode</strong> is shown on top of screen. Press <strong>Power</strong> to enter the recovery image.</p>
</li>
</ul>
<h4>4. Prepare and install CyanogenMod</h4>
<ul>
<li>
<p>In <a href="http://www.clockworkmod.com">ClockworkMod</a> Recovery enter <strong>mounts and storage</strong> → <strong>format /system</strong>. <strong>Yes - Format</strong>.</p>
</li>
<li>
<p>In <a href="http://www.clockworkmod.com">ClockworkMod</a> Recovery enter <strong>mounts and storage</strong> → <strong>format /data and /data/media (/sdcard)</strong>. <strong>Yes - Format</strong>.</p>
</li>
<li>
<p>Check the partitions is OK by going back to main menu and choose <strong>wipe data/factory reset</strong> and <strong>Yes - Wipe all user data</strong>. Check that you don't get any errors on formatting <strong>/data</strong>.</p>
</li>
<li>
<p>Choose <strong>install zip</strong> → <strong>choose zip from sideload</strong> and sideload <a href="http://www.cyanogenmod.org">CyanogenMod</a>.</p>
<div class="highlight"><pre><span class="n">adb</span> <span class="n">sideload</span> <span class="n">cm</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20140504</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">-</span><span class="n">M6</span><span class="o">-</span><span class="n">mako</span><span class="p">.</span><span class="n">zip</span>
</pre></div>


</li>
<li>
<p>Then sideload gapps. Select again <strong>choose zip from sideload</strong>.</p>
<div class="highlight"><pre><span class="n">adb</span> <span class="n">sideload</span> <span class="n">gapps</span><span class="o">-</span><span class="n">kk</span><span class="o">-</span><span class="mi">20140105</span><span class="o">-</span><span class="kt">signed</span><span class="p">.</span><span class="n">zip</span>
</pre></div>


</li>
<li>
<p>Just be on the safe side, go back and choose <strong>wipe data/factory reset</strong> and <strong>Yes - Wipe all user data</strong>.</p>
</li>
<li>
<p><strong>reboot system now</strong>. First boot takes some time, be patient. </p>
</li>
</ul>
<p>If you get problems booting into a clean system, I've read that another factory reset could do the trick. </p>
<h4>5. Encrypt or not</h4>
<p>After installing the phone you can choose to encrypt it or not. I like to encrypt my device with a passphrase. It's my data so why give it away if the phone get stolen; encryption makes it a bit harder for the bad guys.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
        <title>> /dev/null > 2>&1</title>
        <meta charset="utf-8" />
        <link href="http://blog.heimsbakk.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Full Atom Feed" />
        <link href="http://blog.heimsbakk.net/feeds/blog.atom.xml" type="application/atom+xml" rel="alternate" title="> /dev/null > 2>&1 Categories Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://blog.heimsbakk.net/">> /dev/null > 2>&1 <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/index.html">home</a></li>
            <li><a href="#">|</a></li>
              <li class="active"><a href="http://blog.heimsbakk.net/category/blog.html">blog</a></li>
              <li><a href="http://blog.heimsbakk.net/category/uris.html">uris</a></li>
        </ul></nav><!-- /#menu -->
<section id="content">
<h2>Articles in the blog category</h2>

<ol id="post-list">
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2015/2015-01-10-pa.html" rel="bookmark" title="Permalink to Record a PulseAudio sound stream">Record a PulseAudio sound stream</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2015-01-10T00:00:00"> lø. 10 januar 2015 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Ever wondered on how to record the audio from one application? Either the browser or a streaming application that don't have the option to save audio to a file.</p>
<p>The <a href="https://en.wikipedia.org/wiki/PulseAudio">PulseAudio</a> sound server in your desktop makes this quite easy.</p>
<p>I've created a small script that captures the current playing sound stream and redirects it to <a href="https://en.wikipedia.org/wiki/Flac" title="Free Lossless Audio Codec">FLAC</a> audio file. After the capture is started, you can start playing sound from other programs. It won't interfere with the current capture.</p>
<h2>Capture audio</h2>
<h3>Pre requests</h3>
<p>You have to install a couple of programs, if you don't have them from before, to make the bash script work.</p>
<div class="highlight"><pre>apt-get install pulseaudio-utils flac coreutils
</pre></div>


<h3>The script</h3>
<p>This is my <code>record-app.sh</code> script.</p>
<div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="nv">BN</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span>
<span class="nv">SI</span><span class="o">=</span><span class="k">$(</span>pacmd list-sink-inputs | grep -m 1 index | egrep -o <span class="s2">&quot;[[:digit:]]+&quot;</span><span class="k">)</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$1&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;usage: $BN filename&quot;</span>
  <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$SI&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;error: no input sinks found&quot;</span>
  <span class="nb">exit </span>2
<span class="k">fi</span>

<span class="nv">N</span><span class="o">=</span><span class="s2">&quot;$1&quot;</span>

<span class="nb">echo</span> <span class="nv">$BN</span> recording:
<span class="nb">echo</span> · Found sink index «<span class="nv">$SI</span>»
<span class="nb">echo</span> · Loading module-null-sink
<span class="nv">MI</span><span class="o">=</span><span class="k">$(</span>pactl load-module module-null-sink <span class="nv">sink_name</span><span class="o">=</span>rec<span class="k">)</span>
<span class="nb">trap</span> <span class="s2">&quot;{ echo · Trying to delete null sink «rec»; pactl unload-module $MI; }&quot;</span> EXIT
<span class="nb">echo</span> · Moving sink «<span class="nv">$SI</span>» to null sink «rec»
pactl move-sink-input <span class="nv">$SI</span> rec
<span class="nb">echo</span> · Saving sound data to «<span class="nv">$N</span>.flac» 
parec -d rec.monitor | flac --endian<span class="o">=</span>little --sign<span class="o">=</span>signed --channels<span class="o">=</span>2 --bps<span class="o">=</span>16n --sample-rate<span class="o">=</span>44100 -o <span class="s2">&quot;$1.flac&quot;</span> - 2&gt;/dev/null
</pre></div>


<h3>Usage</h3>
<div class="highlight"><pre>usage: record-app.sh filename
</pre></div>


<h4>Example 1</h4>
<div class="highlight"><pre>./record-app.sh firefox-sound
</pre></div>


<p>Will start to record the current playing audio in Firefox. The ...</p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-12-15-vagrant-openstack.html" rel="bookmark" title="Permalink to Vagrant with OpenStack">Vagrant with OpenStack</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-18T00:00:00"> to. 18 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>If you want to use <a href="https://www.vagrantup.com">Vagrant</a> with <a href="http://www.openstack.org">OpenStack</a>, you need to prepare <a href="https://www.vagrantup.com">Vagrant</a> with installing the <a href="https://github.com/cloudbau/vagrant-openstack-plugin">vagrant-openstack-plugin</a>. I had some problems installing it directly through <code>vagrant plugin install</code>. I had to clone it from <a href="https://github.com">Github</a> and install it manually. </p>
<h2>One time configuration</h2>
<h3>Install OpenStack plugin in Vagrant</h3>
<div class="highlight"><pre><span class="nb">cd</span> /tmp
git clone https://github.com/cloudbau/vagrant-openstack-plugin
<span class="nb">cd </span>vagrant-openstack-plugin
gem build vagrant-openstack-plugin.gemspec
vagrant plugin install vagrant-openstack-plugin-*.gem
</pre></div>


<p>Add a dummy box to <a href="https://www.vagrantup.com">Vagrant</a> thats needed by the plugin.</p>
<div class="highlight"><pre>vagrant box add dummy https://github.com/cloudbau/vagrant-openstack-plugin/raw/master/dummy.box
</pre></div>


<h3>Download OpenStack RC file</h3>
<ul>
<li>Log into OpenStack</li>
<li>Download OpenStack API RC file</li>
<li>Go to <code>Project</code> -&gt; <code>Compute</code> -&gt; <code>Access &amp; Security</code> -&gt; <code>API Access</code> </li>
<li>Down RC file by hitting <code>Download OpenStack RC File</code></li>
<li>Put <code>$USER-openrc.sh</code> in your <code>~/</code> or somewhere you prefer</li>
</ul>
<h2>Configure a Vagrant VM</h2>
<h3>Vagrantfile</h3>
<p>This is a default generic Vagrant file which starts a <code>m1.tiny</code> flavor image of Ubuntu Utopic. It requires that you already have added your ssh key to OpenStack. Please add your ssh key with the name <code>$USER_ssh_key</code>. </p>
<div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;vagrant-openstack-plugin&#39;</span>

<span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;dummy&quot;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;rsync&quot;</span><span class="p">,</span> <span class="n">rsync__exclude</span><span class="p">:</span> <span class="s2">&quot;.git/&quot;</span>

  <span class="c1"># Make sure the private key from the key pair is provided</span>
  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">private_key_path</span> <span class="o">=</span> <span class="s2">&quot;~/.ssh/id_rsa&quot;</span>

  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:openstack</span> <span class="k">do</span> <span class="o">|</span><span class="n">os</span><span class="o">|</span>
    <span class="n">os</span><span class="o">.</span><span class="n">username</span>     <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_USERNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">api_key</span>      <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_PASSWORD&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">flavor</span>       <span class="o">=</span> <span class="sr">/m1.tiny/</span>
    <span class="n">os</span><span class="o">.</span><span class="n">image</span>        <span class="o">=</span> <span class="s2">&quot;Ubuntu CI utopic 2014-09-18&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">endpoint</span>     <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_AUTH_URL&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/tokens&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">keypair_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OS_USERNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">_ssh_key&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">ssh_username</span> <span class="o">=</span> <span class="s2">&quot;ubuntu&quot;</span>

    <span class="c1"># The tenant have two networks, so ...</span></pre></div> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-12-15-fio.html" rel="bookmark" title="Permalink to fio - flexible I/O tester">fio - flexible I/O tester</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-15T00:00:00"> ma. 15 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>From man page: <code>fio</code> <em>is a tool that will spawn a number of threads or processes doing a particular type of I/O action as specified by the user. The typical use of fio is to write a job file matching the I/O load one wants to simulate.</em></p>
<p>This example only show how to use <code>fio</code> to make reproduceable test on a file system. For me it's been useful to catch changes in I/O throughput before and after a system has gone into production. Buy running the same tests on all systems the numbers are comparable. </p>
<p>All parameter numbers are examples, define your own test according to what you want to measure. </p>
<h2>Installing fio</h2>
<div class="highlight"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">fio</span>
</pre></div>


<h2>Running fio</h2>
<ul>
<li>Change <code>bsrange</code> to the block size range you want to test. </li>
<li><code>numjobs</code> is the number of simultanious read/write threads.</li>
<li><code>size</code> is the working file size.</li>
<li>If you want to test a read heavy load, use <code>rwmixread</code> with a percentage of reads versus writes..</li>
</ul>
<div class="highlight"><pre><span class="k">for </span>i in <span class="nb">read </span>write readwrite randread randwrite randrw; <span class="k">do </span>fio --name<span class="o">=</span>fio  --write_bw_log<span class="o">=</span><span class="nv">$i</span> --write_iops_log<span class="o">=</span><span class="nv">$i</span> --write_lat_log<span class="o">=</span><span class="nv">$i</span> --ioengine<span class="o">=</span>sync --size<span class="o">=</span>10G --runtime<span class="o">=</span>60 --rw<span class="o">=</span><span class="nv">$i</span> --norandommap --refill_buffers --randrepeat<span class="o">=</span>0  --iodepth<span class="o">=</span>1 --direct<span class="o">=</span>1 --numjobs<span class="o">=</span>8 --group_reporting --bsrange<span class="o">=</span>4k-4k; <span class="k">done</span>
</pre></div>


<h2>Generating I/O plots</h2>
<div class="highlight"><pre>fio2gnuplot -i -g
</pre></div>


<p>For me is the most interesting plot is <strong>compare-result-2Dsmooth.png</strong>.</p>
<h2>Generating bandwidth plots</h2>
<p>Testing bandwidth is better to do with a larger block size. I usually set a block size between 64k to 1m. </p>
<div class="highlight"><pre><span class="k">for ...</span></pre></div> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-04-13-powersave.html" rel="bookmark" title="Permalink to Power saving on laptop">Power saving on laptop</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-12-14T20:00:00"> sø. 14 desember 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Notes for power saving on my i5 laptop.</p>
<h2>/etc/rc.local</h2>
<div class="highlight"><pre><span class="c">#  SATA power save</span>
<span class="nb">echo </span>medium_power | tee /sys/class/scsi_host/host*/link_power_management_policy &gt; /dev/null

<span class="c"># Set minimum performance to 30% of CPU MHz </span>
<span class="nb">echo </span>30 &gt; /sys/devices/system/cpu/intel_pstate/min_perf_pct

<span class="c"># Set CPU governor to power save since we run on a laptop</span>
<span class="c"># Valid values: powersave performance</span>
<span class="nb">echo </span>powersave | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor &gt; /dev/null

<span class="c"># Increase for CrashPlan so unlocking gnome-shell lock screen works</span>
<span class="nb">echo </span>1048576 &gt; /proc/sys/fs/inotify/max_user_watches
</pre></div>


<h2>/etc/default/grub</h2>
<div class="highlight"><pre><span class="c"># Make my back light buttons work correctly</span>
<span class="c"># Full power save for GPU</span>
<span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&quot;video.use_native_backlight=1 i915.enable_rc6=7 i915.enable_fbc=1 i915.lvds_downclock=1&quot;</span>
</pre></div>


<h6>vim: set spell spl=en syn=markdown:</h6> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-06-19-webgl.html" rel="bookmark" title="Permalink to View Google Earth in the browser">View Google Earth in the browser</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-06-19T00:00:00"> to. 19 juni 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Google now supports Google Earth in Google Maps. As far as I know it works in <a href="https://en.wikipedia.org/wiki/Google_Chrome">Chrome</a> and <a href="https://en.wikipedia.org/wiki/Chromium_%28web_browser%29">Chromium</a>. If Google Earth isn't available where the satellite view options is, your graphic card is in the browsers blacklist.</p>
<p>To force enabling <a href="https://en.wikipedia.org/wiki/WebGL">WebGL</a> in the browser start it with the following options</p>
<div class="highlight"><pre>chromium-browser --enable-webgl --ignore-gpu-blacklist
</pre></div>


<p>Now you can use Google Earth in <a href="https://maps.google.com">maps.google.com</a>.</p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-11-rootnexus.html" rel="bookmark" title="Permalink to Flashing a custom rom on Nexus 4">Flashing a custom rom on Nexus 4</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-11T00:00:00"> sø. 11 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>Flashing a custom image on an <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> mobile could be just fun. But if you don't know why you want to do it, or do it just because it's a challenge. <strong>Then don't!</strong> </p>
<h2>The bad and the good</h2>
<p>I'm only pointing out some of the cons and the pros here.</p>
<h3>Negative sides</h3>
<ul>
<li>An OS image could contain <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a>; only use community trusted images.</li>
<li>If you don't pay attention you can get <a href="https://en.wikipedia.org/wiki/Malware" title="Malware">malware</a> running as root. That's B A D !</li>
<li>May not have all the phones vendor functionality. </li>
<li>The image may be buggy.</li>
</ul>
<h4>Consequences of a buggy image</h4>
<ul>
<li>Lock up your phone when you least expect it.</li>
<li>Drain the battery quicker. </li>
<li>Suddenly reboot.</li>
</ul>
<h3>Positive sides</h3>
<ul>
<li>You can get a newer more secure operating system.</li>
<li>Use less battery.</li>
<li>No <a href="https://en.wikipedia.org/wiki/Crapware" title="Pre-installed software">crapware</a>.</li>
<li>Extra security functions.</li>
</ul>
<h2>Flashing CyanogenMod</h2>
<p>One of the custom <a href="https://en.wikipedia.org/wiki/Android_%28operating_system%29" title="Android operating system">Android</a> images based on <a href="https://source.android.com" title="Android Open Source Project">AOSP</a> is <a href="http://www.cyanogenmod.org">CyanogenMod</a>. As I know, it's one of the more used ones. Quite stable if you keep away from the <a href="https://en.wikipedia.org/wiki/Nightlies" title="Neutral build">nightlies</a> and rich on functionality but not bloated.</p>
<h3>Preparations</h3>
<ol>
<li>
<p>Install <a href="https://developer.android.com/tools/help/adb.html" title="Android Debug Bridge">adb</a> and <a href="https://en.wikipedia.org/wiki/Android_software_development#Fastboot" title="Fastboot">fastboot</a> to help manage your Nexus phone.</p>
<div class="highlight"><pre>sudo apt-get install android-tools-adb android-tools-fastboot
</pre></div>


</li>
<li>
<p>Download custom a recovery image. Personally I prefer <a href="http://www.clockworkmod.com">ClockworkMod</a> and the touch recovery. Note, this image is compiled for the Nexus 4 phone. Other phones use other images.</p>
<div class="highlight"><pre>wget http://download2.clockworkmod.com/recoveries/recovery-clockwork-touch-6.0.4.7-mako.img
</pre></div>


</li>
<li>
<p>Download the latest M snapshot from <a href="http://www.cyanogenmod.org">CyanogenMod</a> on <a href="http://download.cyanogenmod.org">download.cyanogenmod.org</a>. The model name for Nexus 4 is ...</p></li></ol> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-03-ssl.html" rel="bookmark" title="Permalink to How to get A+ on SSL Labs">How to get A+ on SSL Labs</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-03T22:00:00"> lø. 03 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>This will show how to get A+ on <a href="https://www.ssllabs.com/ssltest">SSL Server Test</a> from <a href="https://www.ssllabs.com">Qualys SSL Labs</a>. </p>
<p>Enable <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">SSL</a> and <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html">headers</a> module in <a href="https://httpd.apache.org/docs">Apache2</a>.</p>
<div class="highlight"><pre><span class="go">a2enmod ssl </span>
<span class="go">a2enmod headers</span>
</pre></div>


<p>Edit Apache configuration.</p>
<div class="highlight"><pre><span class="nb">SSLCertificateFile</span> <span class="sx">/etc/ssl/crt/</span>«yourcert».pem
<span class="nb">SSLCertificateKeyFile</span> <span class="sx">/etc/ssl/crt/</span>«yourkey».pem
<span class="nb">SSLCertificateChainFile</span> <span class="sx">/etc/ssl/crt/</span>«intermediatechain».pem

<span class="nb">Header</span> always set Strict-Transport-Security <span class="s2">&quot;max-age=31536000; includeSubDomains&quot;</span>
<span class="nb">SSLEngine</span> <span class="k">on</span>
<span class="nb">SSLProtocol</span> <span class="k">all</span> -SSLv2 -SSLv3
<span class="nb">SSLHonorCipherOrder</span> <span class="k">On</span>
<span class="nb">SSLCipherSuite</span> EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS
</pre></div>


<p>The <strong>!</strong> preceding the cipher means that Apache will not use that cipher.</p>
<h2>View ciphers</h2>
<p>List the ciphers openssl supports with the current configuration.</p>
<div class="highlight"><pre>openssl ciphers -v -ssl3 -tls1 <span class="s1">&#39;EECDH:EDH:AES:!aNULL:!eNULL:!LOW:!RC4:!3DES:!DES:!MD5:!EXP:!PSK:!SRP:!DSS&#39;</span>
</pre></div>


<h2>Explanation</h2>
<p>With this configuration Apache will prefer <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a>. If <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Perfect forward secrecy</a> can't be negotiated it will default to <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a> cipher. This configuration will work on all newer browser. Exceptions are older <a href="https://en.wikipedia.org/wiki/Internet_explorer">IE</a>, older Java and a few bots. </p>
<p>Where there are no links to the information source it's taken from the <a href="https://www.openssl.org/docs/apps/ciphers.html">documentation</a> on <a href="https://www.openssl.org">openssl.org</a>.</p>
<h4>Header always set Strict-Transport-Security</h4>
<p>Force browser to use <a href="https://en.wikipedia.org/wiki/Https">HTTPS</a> even if the user enters <a href="https://en.wikipedia.org/wiki/Http">HTTP</a>. The browser should remember this setting for a really long time, example a year.</p>
<h4>SSLHonorCipherOrder On</h4>
<p>Use the servers preferred encryption not the browsers which may be a weaker cipher.</p>
<h4>EECDH</h4>
<p>Ephemeral elliptic-curve Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/ECDH">ECDH</a>.</p>
<h4>EDH</h4>
<p>Ephemeral Diffie-Hellman, see <a href="https://en.wikipedia.org/wiki/Diffie-Helmann">Diffie–Hellman key exchange</a>.</p>
<h4>AES</h4>
<p><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption Standard</a>.</p>
<h4>!aNULL</h4>
<p>The cipher suites offering no authentication. This ...</p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-03-rst.html" rel="bookmark" title="Permalink to reStructuredText cheat sheet">reStructuredText cheat sheet</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-03T21:00:00"> lø. 03 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p class="first last">My cheat sheet for <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html">reStructuredText</a> syntax with examples how it will look after parsing. <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html">reStructuredText</a> is an alternative for <a class="reference external" href="http://daringfireball.net/projects/markdown">Markedown</a>.</p>
 </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-03-dropbox.html" rel="bookmark" title="Permalink to Auto generate Pelican blog from Dropbox">Auto generate Pelican blog from Dropbox</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-03T00:00:00"> lø. 03 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>This is my notes for how to update my <a href="http://blog.getpelican.com">Pelican</a> blog automaticlly when I write new posts. See <a href="2014-04-12-pelican">Creating a blog based on Pelican</a> for getting started with <a href="http://blog.getpelican.com">Pelican</a> blog engine.</p>
<p>A way to be able to blog from anywhere is to use <a href="https://www.dropbox.com">Dropbox</a> as repository for the your blog. Then let <a href="http://blog.getpelican.com">Pelican</a> auto regenerate the blog on changes in the <a href="https://www.dropbox.com">Dropbox</a> folder.</p>
<p>A prerequest for this recipe is that <code>/var/www</code> is not directly exposed to the web.</p>
<h2>Preparing Dropbox</h2>
<p>First create a new <a href="https://www.dropbox.com">Dropbox</a> account and create a <code>Pelican</code> folder. Share this folder with your main <a href="https://www.dropbox.com">Dropbox</a> account. Now copy the sources for your <a href="http://blog.getpelican.com">Pelican</a> blog into the the shared folder.</p>
<p>On your web server, install <a href="https://www.dropbox.com">Dropbox</a> under the <code>www-data</code> user. </p>
<div class="highlight"><pre><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> wget -O - <span class="s2">&quot;https://www.dropbox.com/download?plat=lnx.x86_64&quot;</span> | tar xzf -
</pre></div>


<p>Then link up the new <a href="https://www.dropbox.com">Dropbox</a> account to the web server by accessing the link you get from starting the <a href="https://www.dropbox.com">Dropbox</a> daemon.</p>
<div class="highlight"><pre>~/.dropbox-dist/dropboxd
</pre></div>


<p>Edit crontab for <code>www-data</code>, <code>crontab -e</code>, to start <a href="https://www.dropbox.com">Dropbox</a> daemon if it's not running. useful when the server reboots.</p>
<div class="highlight"><pre><span class="err">*/</span><span class="mi">5</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="n">pgrep</span> <span class="o">-</span><span class="n">F</span> <span class="o">~/</span><span class="p">.</span><span class="n">dropbox</span><span class="o">/</span><span class="n">dropbox</span><span class="p">.</span><span class="n">pid</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">||</span> <span class="p">(</span><span class="o">~/</span><span class="p">.</span><span class="n">dropbox</span><span class="o">-</span><span class="n">dist</span><span class="o">/</span><span class="n">dropboxd</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>


<p>Now <a href="https://www.dropbox.com">Dropbox</a> should be in sync and have your latest source for the blog.</p>
<h2>Autogenerate blog on change</h2>
<p>We need to install <a href="http://blog.getpelican.com">Pelican</a> blog engine and <a href="http://inotify.aiken.cz/?section=incron&amp;page=about&amp;lang=en">incron</a> to trigger auto generation of the blog on changes in the <code>~/Dropbox/Pelican/content</code> folder.</p>
<div class="highlight"><pre>sudo apt-get install python-pelican python-markdown incron
</pre></div>


<p>Edit <code>DROPBOX_DIR</code> the the <a href="http://blog.getpelican.com">Pelican</a> <code>Makefile</code> to point to the <a href="https://en.wikipedia.org/wiki/Virtual_hosting" title="Virtual hosting">VirtualHost ...</a></p> </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header> <h2 class="entry-title"><a href="http://blog.heimsbakk.net/posts/2014/2014-05-01-easyrsa.html" rel="bookmark" title="Permalink to Configuring OpenVPN server on RTN66U">Configuring OpenVPN server on RTN66U</a></h2> </header>
                <footer class="post-info">
                    <abbr class="published" title="2014-05-01T00:00:00"> to. 01 mai 2014 </abbr>
                    <address class="vcard author">By
                        <a class="url fn" href="http://blog.heimsbakk.net/author/arnulf.html">arnulf</a>
                    </address>
                </footer><!-- /.post-info -->
                <div class="entry-content"> <p>The router firmware Tomato, see previous post <a href="2014-04-17-tomato">RT-N66u with Tomato by Shibby firmware</a>, can act as an <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> server.</p>
<p>Using open <a href="https://en.wikipedia.org/wiki/Wifi" title="Wi-Fi">Wi-Fi</a> access points can be very useful and necessary, but it is inherently insecure. Using the router as an <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> server can increase your privacy and security when you are on the go. By creating an encrypted <a href="https://en.wikipedia.org/wiki/Vpn" title="Virtual Private Network">VPN</a> connection back home to the router, you don't only get protection from nosy eavesdroppers but you get access to all your equipment behind the router at home as well.</p>
<p>For <a href="https://en.wikipedia.org/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> to work we need to create our own <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> for signing both server, the router, and optionally client certificates. This notes will only show how to create a server certificate and configure the router with user name and password authentication.</p>
<h2>Preparations, create CA</h2>
<p>Install necessary software. Although haveged, is not required, see <a href="2014-04-29-haveged">Better entropy with haveged</a>.</p>
<div class="highlight"><pre>sudo apt-get install easy-rsa haveged
</pre></div>


<p>Create a work directory for <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">OpenVPN</a>. Take care to protect this directory and the files under it. </p>
<div class="highlight"><pre><span class="n">make</span><span class="o">-</span><span class="n">cadir</span> <span class="err">«</span><span class="n">yourdomain</span><span class="err">»</span>
</pre></div>


<p>Enter your <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> directory.</p>
<div class="highlight"><pre><span class="nb">cd</span> «yourdomain»
</pre></div>


<p>Edit the <code>vars</code> file and change the following variables to something more sensible for you.</p>
<div class="highlight"><pre><span class="nb">export </span><span class="nv">KEY_COUNTRY</span><span class="o">=</span><span class="s2">&quot;US&quot;</span>
<span class="nb">export </span><span class="nv">KEY_PROVINCE</span><span class="o">=</span><span class="s2">&quot;CA&quot;</span>
<span class="nb">export </span><span class="nv">KEY_CITY</span><span class="o">=</span><span class="s2">&quot;SanFrancisco&quot;</span>
<span class="nb">export </span><span class="nv">KEY_ORG</span><span class="o">=</span><span class="s2">&quot;Funston-Fort&quot;</span>
<span class="nb">export </span><span class="nv">KEY_EMAIL</span><span class="o">=</span><span class="s2">&quot;me@myhost.mydomain&quot;</span>
</pre></div>


<p>Source the variables into current bash session.</p>
<div class="highlight"><pre><span class="nb">source</span> ./vars
</pre></div>


<p>Do a initial clean.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">clean</span><span class="o">-</span><span class="n">all</span> 
</pre></div>


<p>Create your <a href="https://en.wikipedia.org/wiki/Certificate_authority" title="Certificate Authority">CA</a> public and private key.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">ca</span>
</pre></div>


<p>Generate your <a href="https://en.wikipedia.org/wiki/Diffie-Helmann" title="Diffie–Hellman key exchange">Diffie–Hellman</a> parameters.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">dh</span>
</pre></div>


<p>Create your routers public and private key.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">key ...</span></pre></div> </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="http://blog.heimsbakk.net/category/blog2.html">&raquo;</a>
</p>
</section><!-- /#content -->
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>